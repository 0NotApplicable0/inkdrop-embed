{"version":3,"sources":["../../src/providers/gist.js"],"names":["BASE_URL","test","url","startsWith","Gist","props","href","contentFrame","frameId","Math","random","current","frame","contentDocument","html","writeln","close","prototype","propTypes","PropTypes","string"],"mappings":";;;;;;;;AAAA;;AACA;;;;;;;;AAEA,MAAMA,QAAQ,GAAG,0BAAjB;;AAEO,SAASC,IAAT,CAAcC,GAAd,EAAmB;AACxB,SAAOA,GAAG,CAACC,UAAJ,CAAeH,QAAf,CAAP;AACD;;AAEc,SAASI,IAAT,CAAcC,KAAd,EAAqB;AAClC,QAAM;AAAEC,IAAAA;AAAF,MAAWD,KAAjB;AACA,QAAME,YAAY,GAAG,mBAArB;AACA,QAAM,CAACC,OAAD,IAAY,oBAAS,UAAUC,IAAI,CAACC,MAAL,EAAnB,CAAlB;AAEA,uBAAU,MAAM;AACd,UAAM;AAAEC,MAAAA,OAAO,EAAEC;AAAX,QAAqBL,YAA3B;;AACA,QAAIK,KAAK,IAAIA,KAAK,CAACC,eAAnB,EAAoC;AAClC,YAAMC,IAAI,GAAI;mGAC+EN,OAAQ;8CAC7DF,IAAK;;;;;;;;;;OAF7C;AAaAM,MAAAA,KAAK,CAACC,eAAN,CAAsBE,OAAtB,CAA8BD,IAA9B;AACAF,MAAAA,KAAK,CAACC,eAAN,CAAsBG,KAAtB;AACD;AACF,GAnBD,EAmBG,CAACV,IAAD,CAnBH;AAoBA,SACE;AAAQ,IAAA,EAAE,EAAEE,OAAZ;AAAqB,IAAA,SAAS,EAAC,aAA/B;AAA6C,IAAA,GAAG,EAAED;AAAlD,IADF;AAGD;;AAEDH,IAAI,CAACa,SAAL,CAAeC,SAAf,GAA2B;AACzBZ,EAAAA,IAAI,EAAEa,mBAAUC;AADS,CAA3B","sourcesContent":["import * as React from 'react'\nimport PropTypes from 'prop-types'\nimport { useEffect, useRef, useState } from 'react'\nconst BASE_URL = 'https://gist.github.com/'\n\nexport function test(url) {\n  return url.startsWith(BASE_URL)\n}\n\nexport default function Gist(props) {\n  const { href } = props\n  const contentFrame = useRef()\n  const [frameId] = useState('gist-' + Math.random())\n\n  useEffect(() => {\n    const { current: frame } = contentFrame\n    if (frame && frame.contentDocument) {\n      const html = `\n        <html><body onload=\"window.parent.postMessage({message: 'embed:adjust-iframe-size', id: '${frameId}', height: document.body.scrollHeight});\">\n        <script type=\"text/javascript\" src=\"${href}.js\"></script>\n        <script>\n        document.addEventListener('click', function (event) {\n          if (event.target.tagName === 'A') {\n            event.preventDefault();\n            window.parent.postMessage({ message: 'embed:open-external', uri: event.target.href })\n          }\n        }, false);\n        </script>\n        </body></html>\n      `\n      frame.contentDocument.writeln(html)\n      frame.contentDocument.close()\n    }\n  }, [href])\n  return (\n    <iframe id={frameId} className=\"embed-frame\" ref={contentFrame}></iframe>\n  )\n}\n\nGist.prototype.propTypes = {\n  href: PropTypes.string\n}\n"],"file":"gist.js"}